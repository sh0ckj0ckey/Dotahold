<Page
    x:Class="Dotahold.Views.DotaMatchesPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Dotahold.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:models="using:Dotahold.Models"
    xmlns:converter="using:Dotahold.Converters"
    xmlns:ToolkitUICtrl="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:ui="using:Dotahold.UI" 
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    NavigationCacheMode="Required" d:RequestedTheme="Dark">

    <Grid>
        <Grid x:Name="PlayerProfileGrid" Grid.Column="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <ScrollViewer Grid.Row="0" Grid.RowSpan="2" HorizontalScrollMode="Disabled" VerticalScrollBarVisibility="Hidden">
                <Grid Background="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Padding="0,0,0,0">
                    <!--最近5场比赛-->
                    <FlipView Grid.Row="1" CornerRadius="8" Margin="20,0,22,16" Height="120"
                              ItemsSource="{x:Bind ViewModel.vRecentMatchesForFlip,Mode=OneWay}"
                              HorizontalAlignment="Stretch" Background="Transparent" BorderThickness="0">
                        <FlipView.ItemTemplate>
                            <DataTemplate x:DataType="models:DotaRecentMatchModel">
                                <Grid Background="Transparent" Height="120" HorizontalAlignment="Stretch" CornerRadius="8">
                                    <Grid Background="{ThemeResource RECENTMATCH_FLIPCARD_BK}" BorderBrush="{ThemeResource RECENTMATCH_FLIPCARD_BD}" BorderThickness="1" CornerRadius="8" Height="100" VerticalAlignment="Bottom">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>
                                        <Grid Grid.Row="0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="{x:Bind sHeroName}" FontWeight="Bold" Margin="18,8,4,0" TextTrimming="CharacterEllipsis"
                                                       MaxWidth="296" FontSize="16" CharacterSpacing="50" FontFamily="/Fonts/Reaver-Bold.ttf#Reaver"/>
                                            <Border Grid.Column="1" Height="14" Width="14" CornerRadius="2" Margin="2,10,0,0" Background="ForestGreen" HorizontalAlignment="Center" VerticalAlignment="Center"
                                                    Visibility="{x:Bind bWin,Converter={StaticResource Bool2Vis}}">
                                                <TextBlock Text="W" FontSize="10" FontWeight="Medium" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{ThemeResource ApplicationPageBackgroundThemeBrush}"/>
                                            </Border>
                                            <Border Grid.Column="1" Height="14" Width="14" CornerRadius="2" Margin="2,10,0,0" Background="Firebrick" HorizontalAlignment="Center" VerticalAlignment="Center"
                                                    Visibility="{x:Bind bWin,Converter={StaticResource Bool2Vis},ConverterParameter=-}">
                                                <TextBlock Text="L" FontSize="10" FontWeight="Medium" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{ThemeResource ApplicationPageBackgroundThemeBrush}"/>
                                            </Border>
                                        </Grid>
                                        <TextBlock Grid.Row="1" FontWeight="Medium" Margin="18,0,4,0" TextTrimming="CharacterEllipsis" FontSize="13" CharacterSpacing="60">
                                            <Run Text="K/D/A:"/>
                                            <Run Text="{x:Bind kills}"/>
                                            <Run Text="/" FontWeight="Normal"/>
                                            <Run Text="{x:Bind deaths}"/>
                                            <Run Text="/" FontWeight="Normal"/>
                                            <Run Text="{x:Bind assists}"/>
                                        </TextBlock>
                                        <TextBlock Grid.Row="2" FontWeight="Medium" Margin="18,0,4,0" TextTrimming="CharacterEllipsis" FontSize="13" CharacterSpacing="60">
                                            <Run Text="Last Hits:"/>
                                            <Run Text="{x:Bind last_hits}"/>
                                        </TextBlock>
                                        <TextBlock Grid.Row="3" Text="{x:Bind start_time,Converter={StaticResource Long2Time}}" FontWeight="Medium" Margin="18,0,4,8" TextTrimming="CharacterEllipsis" VerticalAlignment="Bottom"
                                                   FontSize="12" Opacity="0.7" CharacterSpacing="60"/>

                                        <Button Grid.RowSpan="4" BorderThickness="0" Background="Transparent" CornerRadius="6" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Click="OnClickFlipRecentMatch"/>
                                    </Grid>
                                    <Image Width="220" Source="{x:Bind CoverImageSource,Mode=OneWay}" Stretch="Uniform" HorizontalAlignment="Right" VerticalAlignment="Bottom" IsHitTestVisible="False"/>
                                </Grid>
                            </DataTemplate>
                        </FlipView.ItemTemplate>
                    </FlipView>
                </Grid>
            </ScrollViewer>

            <!--加载中-->
            <Grid Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Bottom"
                  Height="Auto" CornerRadius="12,12,0,0"
                  Visibility="{x:Bind ViewModel.bLoadingHeroesAndItems,Mode=OneWay,Converter={StaticResource Bool2Vis}}">
                <Grid.Background>
                    <AcrylicBrush BackgroundSource="Backdrop" FallbackColor="{ThemeResource APPLICATION_BK}" TintColor="Transparent"/>
                </Grid.Background>
                <muxc:ProgressBar Foreground="{ThemeResource APPLICATION_FR}" IsIndeterminate="{x:Bind ViewModel.bLoadingHeroesAndItems,Mode=OneWay}" VerticalAlignment="Bottom" Margin="0,0,0,10" Opacity="0.5"/>
                <TextBlock Text="fetching heroes and items list..." FontWeight="Medium" CharacterSpacing="40" FontSize="12" Opacity="0.7" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,12,0,18"/>
            </Grid>
        </Grid>
    </Grid>
</Page>
